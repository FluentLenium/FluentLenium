name: 'Setup environment'
description: "install java, maven wrapper & checkout repo"

inputs:
  java-version:
    description: 'java version to install'
    required: true

runs:
  using: "composite"
  steps:
    - name: Set up JDK ${{ inputs.java-version }}
      uses: actions/setup-java@v3
      with:
        java-version: ${{ inputs.java-version }}
        distribution: 'zulu'
        cache: "maven"

    - name: Cache Maven Wrapper
      uses: actions/cache@v3
      with:
        key: mavenWrapper-${{ hashfiles('.mvn/wrapper/maven-wrapper.*') }}
        path: ~/.m2/wrapper

    - name: Gradle local build cache
      uses: actions/cache@v3
      with:
        key: gradleLocalBuildCache-${{github.ref_name}}-${{github.run_attempt}}
        path: ~/.m2/.gradle-enterprise/build-cache
        restore-keys: |
          gradleLocalBuildCache-${{github.ref_name}}
          gradleLocalBuildCache-develop
